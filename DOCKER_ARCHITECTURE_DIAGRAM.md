# ğŸ—ï¸ Docker Architecture Diagram

## Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DOCKER HOST                                   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    library-network (bridge)                       â”‚ â”‚
â”‚  â”‚                                                                   â”‚ â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚ â”‚
â”‚  â”‚   â”‚   Frontend      â”‚      â”‚    Backend      â”‚                  â”‚ â”‚
â”‚  â”‚   â”‚   Container     â”‚â—„â”€â”€â”€â”€â–ºâ”‚   Container     â”‚                  â”‚ â”‚
â”‚  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚ â”‚
â”‚  â”‚   â”‚  Nginx:alpine   â”‚      â”‚ Java 17 JRE     â”‚                  â”‚ â”‚
â”‚  â”‚   â”‚                 â”‚      â”‚                 â”‚                  â”‚ â”‚
â”‚  â”‚   â”‚ â€¢ React SPA     â”‚      â”‚ â€¢ Spring Boot   â”‚                  â”‚ â”‚
â”‚  â”‚   â”‚ â€¢ Static Files  â”‚      â”‚ â€¢ REST API      â”‚                  â”‚ â”‚
â”‚  â”‚   â”‚ â€¢ Gzip          â”‚      â”‚ â€¢ JPA/Hibernate â”‚                  â”‚ â”‚
â”‚  â”‚   â”‚ â€¢ SPA Routing   â”‚      â”‚ â€¢ Bean Valid.   â”‚                  â”‚ â”‚
â”‚  â”‚   â”‚ â€¢ API Proxy     â”‚      â”‚ â€¢ Actuator      â”‚                  â”‚ â”‚
â”‚  â”‚   â”‚                 â”‚      â”‚                 â”‚                  â”‚ â”‚
â”‚  â”‚   â”‚ Health: /health â”‚      â”‚ Health: /actuatorâ”‚                 â”‚ â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚ â”‚
â”‚  â”‚            â”‚                         â”‚                           â”‚ â”‚
â”‚  â”‚        Port 80                   Port 8080                       â”‚ â”‚
â”‚  â”‚            â”‚                         â”‚                           â”‚ â”‚
â”‚  â”‚            â”‚                         â”‚                           â”‚ â”‚
â”‚  â”‚            â”‚                         â†“                           â”‚ â”‚
â”‚  â”‚            â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ â”‚
â”‚  â”‚            â”‚                 â”‚   MySQL      â”‚                    â”‚ â”‚
â”‚  â”‚            â”‚                 â”‚  Container   â”‚                    â”‚ â”‚
â”‚  â”‚            â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚ â”‚
â”‚  â”‚            â”‚                 â”‚  MySQL 8.0   â”‚                    â”‚ â”‚
â”‚  â”‚            â”‚                 â”‚              â”‚                    â”‚ â”‚
â”‚  â”‚            â”‚                 â”‚ â€¢ librarydb  â”‚                    â”‚ â”‚
â”‚  â”‚            â”‚                 â”‚ â€¢ InnoDB     â”‚                    â”‚ â”‚
â”‚  â”‚            â”‚                 â”‚ â€¢ User: lib  â”‚                    â”‚ â”‚
â”‚  â”‚            â”‚                 â”‚              â”‚                    â”‚ â”‚
â”‚  â”‚            â”‚                 â”‚ Health: ping â”‚                    â”‚ â”‚
â”‚  â”‚            â”‚                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â”‚
â”‚  â”‚            â”‚                        â”‚                            â”‚ â”‚
â”‚  â”‚            â”‚                    Port 3306                        â”‚ â”‚
â”‚  â”‚            â”‚                        â”‚                            â”‚ â”‚
â”‚  â”‚            â”‚                        â†“                            â”‚ â”‚
â”‚  â”‚            â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ â”‚
â”‚  â”‚            â”‚                 â”‚ mysql_data   â”‚                    â”‚ â”‚
â”‚  â”‚            â”‚                 â”‚  Volume      â”‚                    â”‚ â”‚
â”‚  â”‚            â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  Exposed to Host:                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Port 80    â†’  frontend:80   (Nginx)                          â”‚     â”‚
â”‚  â”‚  Port 8080  â†’  backend:8080  (Spring Boot)                    â”‚     â”‚
â”‚  â”‚  Port 3308  â†’  mysql:3306    (MySQL)                          â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â†• Docker CLI

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   docker-compose    â”‚
                    â”‚                     â”‚
                    â”‚  â€¢ Build Images     â”‚
                    â”‚  â€¢ Start Services   â”‚
                    â”‚  â€¢ Manage Network   â”‚
                    â”‚  â€¢ Health Checks    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Request Flow

### Frontend Request (User clicks "View Books")

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ HTTP GET http://localhost/
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Docker Host:80     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend Container          â”‚
â”‚                             â”‚
â”‚ Nginx receives request      â”‚
â”‚ Serves /index.html          â”‚
â”‚ React Router handles route  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API Request (Fetch all books)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ HTTP GET http://localhost/api/books/displayAllBooks
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Docker Host:80     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend Container                  â”‚
â”‚                                     â”‚
â”‚ Nginx receives /api/* request       â”‚
â”‚ Proxies to http://backend:8080/api/ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ Internal Docker Network
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend Container                   â”‚
â”‚                                     â”‚
â”‚ Spring Boot receives request        â”‚
â”‚ Controller â†’ Service â†’ Repository   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ JDBC Connection
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MySQL Container                     â”‚
â”‚                                     â”‚
â”‚ Executes SQL query                  â”‚
â”‚ SELECT * FROM books                 â”‚
â”‚ Returns ResultSet                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“ (Response flows back up)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser  â”‚ Receives JSON array of books
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Build Process Flow

### Backend Build

```
Dockerfile (Multi-stage)
â”‚
â”œâ”€ STAGE 1: BUILD
â”‚  â””â”€ FROM maven:3.9-eclipse-temurin-17
â”‚     â”œâ”€ COPY pom.xml
â”‚     â”œâ”€ RUN mvn dependency:go-offline
â”‚     â”œâ”€ COPY src/
â”‚     â””â”€ RUN mvn clean package -DskipTests
â”‚        â””â”€ Produces: target/SBP1-0.0.1-SNAPSHOT.jar
â”‚
â””â”€ STAGE 2: RUNTIME
   â””â”€ FROM eclipse-temurin:17-jre-alpine
      â”œâ”€ COPY --from=build target/*.jar app.jar
      â”œâ”€ EXPOSE 8080
      â””â”€ ENTRYPOINT ["java", "-jar", "app.jar"]

Result: ~200 MB image (vs ~800 MB if we kept Maven)
```

### Frontend Build

```
Dockerfile (Multi-stage)
â”‚
â”œâ”€ STAGE 1: BUILD
â”‚  â””â”€ FROM node:18-alpine
â”‚     â”œâ”€ COPY package*.json
â”‚     â”œâ”€ RUN npm ci
â”‚     â”œâ”€ COPY src/
â”‚     â””â”€ RUN npm run build
â”‚        â””â”€ Produces: dist/ folder
â”‚
â””â”€ STAGE 2: SERVE
   â””â”€ FROM nginx:alpine
      â”œâ”€ COPY nginx.conf
      â”œâ”€ COPY --from=build dist/ /usr/share/nginx/html
      â”œâ”€ EXPOSE 80
      â””â”€ CMD ["nginx", "-g", "daemon off;"]

Result: ~25 MB image (vs ~400 MB if we kept Node.js)
```

---

## Data Persistence

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        MySQL Container              â”‚
â”‚                                     â”‚
â”‚  /var/lib/mysql â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  (internal path)                â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                      â”‚
                                 Bind Mount
                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”
â”‚    Docker Volume: mysql_data            â”‚
â”‚                                         â”‚
â”‚  Stored on host:                        â”‚
â”‚  Windows: C:\ProgramData\Docker\volumes\â”‚
â”‚  Linux: /var/lib/docker/volumes/        â”‚
â”‚                                         â”‚
â”‚  Data persists even if container dies  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Health Check Flow

```
Every 30 seconds:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Docker Engineâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Executes health check command
       â”‚
       â”œâ”€â”€â–º Frontend: wget http://localhost/health
       â”‚    â””â”€ Nginx returns 200 OK â†’ Healthy
       â”‚
       â”œâ”€â”€â–º Backend: curl http://localhost:8080/actuator/health
       â”‚    â””â”€ Spring Actuator returns {"status":"UP"} â†’ Healthy
       â”‚
       â””â”€â”€â–º MySQL: mysqladmin ping
            â””â”€ MySQL responds â†’ Healthy

If unhealthy for 3 consecutive checks:
â””â”€â–º Docker restarts container automatically
```

---

## Network Isolation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Docker Host                            â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            library-network (172.18.0.0/16)            â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚ â”‚
â”‚  â”‚   â”‚  frontend    â”‚   â”‚  backend     â”‚               â”‚ â”‚
â”‚  â”‚   â”‚  172.18.0.2  â”‚   â”‚  172.18.0.3  â”‚               â”‚ â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚ â”‚
â”‚  â”‚          â”‚                    â”‚                      â”‚ â”‚
â”‚  â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚ â”‚
â”‚  â”‚                   â”‚                                  â”‚ â”‚
â”‚  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚ â”‚
â”‚  â”‚           â”‚     mysql      â”‚                        â”‚ â”‚
â”‚  â”‚           â”‚   172.18.0.4   â”‚                        â”‚ â”‚
â”‚  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚ â”‚
â”‚  â”‚                                                      â”‚ â”‚
â”‚  â”‚   Services can communicate using:                   â”‚ â”‚
â”‚  â”‚   â€¢ DNS names (backend, mysql, frontend)            â”‚ â”‚
â”‚  â”‚   â€¢ IP addresses (172.18.0.x)                       â”‚ â”‚
â”‚  â”‚   â€¢ No external access unless port exposed          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  Other Docker Networks:                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚  other-network (isolated)â”‚                              â”‚
â”‚  â”‚  (Cannot reach library-  â”‚                              â”‚
â”‚  â”‚   network services)      â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Sequence

```
docker-compose up -d
â”‚
â”œâ”€ Step 1: Create Network
â”‚  â””â”€ docker network create library-network
â”‚
â”œâ”€ Step 2: Create Volume
â”‚  â””â”€ docker volume create mysql_data
â”‚
â”œâ”€ Step 3: Start MySQL
â”‚  â”œâ”€ Pull mysql:8.0 image
â”‚  â”œâ”€ Create container
â”‚  â”œâ”€ Mount volume
â”‚  â”œâ”€ Set environment variables
â”‚  â”œâ”€ Start MySQL
â”‚  â””â”€ Wait for health check (mysqladmin ping)
â”‚
â”œâ”€ Step 4: Start Backend (waits for MySQL healthy)
â”‚  â”œâ”€ Build image from Dockerfile
â”‚  â”œâ”€ Create container
â”‚  â”œâ”€ Connect to library-network
â”‚  â”œâ”€ Set environment variables
â”‚  â”œâ”€ Start Spring Boot
â”‚  â””â”€ Wait for health check (/actuator/health)
â”‚
â”œâ”€ Step 5: Start Frontend (waits for Backend)
â”‚  â”œâ”€ Build image from Dockerfile
â”‚  â”œâ”€ Create container
â”‚  â”œâ”€ Connect to library-network
â”‚  â”œâ”€ Start Nginx
â”‚  â””â”€ Wait for health check (/health)
â”‚
â””â”€ Complete!
   â””â”€ All services running and healthy
```

---

## Resource Allocation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Docker Host Resources                     â”‚
â”‚                                                         â”‚
â”‚  CPU: 4 cores                                           â”‚
â”‚  RAM: 8 GB                                              â”‚
â”‚  Disk: 100 GB                                           â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  MySQL Container                                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ CPU: ~0.5 core  RAM: ~400 MB  Disk: ~600 MBâ”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Backend Container                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ CPU: ~0.3 core  RAM: ~512 MB  Disk: ~200 MBâ”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Frontend Container                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ CPU: ~0.1 core  RAM: ~20 MB   Disk: ~25 MB â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚  Total Usage:                                           â”‚
â”‚  â€¢ CPU: ~0.9 core (22%)                                â”‚
â”‚  â€¢ RAM: ~932 MB (11%)                                  â”‚
â”‚  â€¢ Disk: ~825 MB                                       â”‚
â”‚                                                         â”‚
â”‚  Remaining: Available for scaling/other services       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Production Scaling

```
Load Balancer (Nginx/HAProxy)
â”‚
â”œâ”€â–º Frontend Instance 1
â”œâ”€â–º Frontend Instance 2
â””â”€â–º Frontend Instance 3
        â”‚
        â”‚ Proxy to Backend
        â†“
    Round Robin
        â”‚
        â”œâ”€â–º Backend Instance 1 â”€â”€â”
        â”œâ”€â–º Backend Instance 2 â”€â”€â”¼â”€â–º Managed MySQL
        â””â”€â–º Backend Instance 3 â”€â”€â”˜    (AWS RDS)
```

---

**This diagram explains the complete Docker architecture of your Library Management System!**
